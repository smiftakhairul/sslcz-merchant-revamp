import moment from "moment";

let discountPercentages = [];
for(let n = 0; n < 100; n = n + 0.5) {
    let option = {label: (n / 100) + '%', value: (n / 100)}
	// $discount_percentage["$n"] = (String) ($n/100) . " %";
    discountPercentages.push(option);
}
const discountByCustomerPhoneOptions = [
    {label: "Discount Based on Customer Phone Provided by Merchant", value: 1},
    {label: "Disabled", value: 0},
];
const statusOptions = [
    {label: 'Active', value: 1},
    {label: 'De-active', value: 0},
];

export const discountFormFields = (data = null, banks = [], fileChangeHandler) => [
    {
        type: "text",
        label: "Discount Title",
        name: "offer_name",
        placeholder: "Discount title",
        defaultValue: data?.offer_name || '',
        required: true,
        // options: [],
        // infoText: "",
        // height: 100,
        // class: "",
        // id: "",
        // wrapperClass: "col-md-12"
    },
    {
        type: "textarea",
        label: "Offer Description",
        name: "display_message",
        placeholder: "Offer description",
        defaultValue: data?.display_message || '',
        required: true,
        height: 100,
    },
    {
        type: "textarea",
        label: "Description at Success Page",
        name: "disc_msg_at_succ_pag",
        placeholder: "Success page description",
        defaultValue: data?.disc_msg_at_succ_pag || '',
        required: false,
        height: 100,
    },
    {
        type: "checkbox",
        label: "Whether to Display Message",
        checkboxLabel: "Text will be displayed with offer image",
        name: "display_popup",
        placeholder: "Display Message",
        defaultValue: data?.hasOwnProperty('display_popup') ? data?.display_popup : false,
        required: false,
        id: "display_popup",
    },
    {
        type: "text",
        label: "URL of Terms & Conditions",
        name: "link_t_c",
        placeholder: "T&C url",
        defaultValue: data?.link_t_c || '',
        required: false,
        wrapperClass: "col-md-12 mt-2",
    },
    {
        type: "date",
        label: "Offer Start",
        name: "offer_start",
        placeholder: "Offer start",
        defaultValue: data?.offer_start 
            ? moment(data?.offer_start, 'YYYY-MM-DD hh:mm:ss').format('DD-MM-YYYY').toString()
            : moment().format('DD-MM-YYYY').toString(),
        required: true,
        wrapperClass: "col-md-6",
    },
    {
        type: "date",
        label: "Offer End",
        name: "offer_end",
        placeholder: "Offer end",
        defaultValue: data?.offer_end 
            ? moment(data?.offer_end, 'YYYY-MM-DD hh:mm:ss').format('DD-MM-YYYY').toString()
            : moment().format('DD-MM-YYYY').toString(),
        required: true,
        wrapperClass: "col-md-6",
    },
    {
        type: "select",
        label: "Acquirer Bank",
        name: "gw_id",
        placeholder: "Select bank",
        options: banks || [],
        defaultValue: data?.gw_id || '',
        required: true,
    },
    {
        type: "checkbox",
        checkboxLabel: "For any gateway",
        name: "gw_all",
        placeholder: "Any gateway",
        defaultValue: data?.hasOwnProperty('gw_all') ? data?.gw_all : false,
        required: false,
        id: "gw_all",
    },
    {
        type: "select",
        label: "Discount Percentage",
        name: "discount_perc",
        placeholder: "Select percentage",
        options: discountPercentages || [],
        defaultValue: data?.discount_perc || '',
        required: true,
        wrapperClass: "col-md-12 mt-2",
    },
    {
        type: "number",
        label: "Discount Amount",
        name: "discount_amount",
        placeholder: "Discount amount",
        defaultValue: data?.discount_amount || '',
        required: true,
    },
    {
        type: "select",
        label: "Discount by Customer Phone",
        name: "is_cus_mobile",
        placeholder: "Select percentage",
        options: discountByCustomerPhoneOptions || [],
        defaultValue: data?.hasOwnProperty('is_cus_mobile')
            ? data?.is_cus_mobile
            : '',
        required: true,
        wrapperClass: "col-md-12 mt-2",
    },
    {
        type: "number",
        label: "No of Trans by Same Card or Cust Phone",
        infoText: "Choose No Same Card Used/Cust Mobile No or Total Discount Amount Allowed. Both not work in same campaign",
        name: "no_same_card_used",
        placeholder: "No of transactions",
        defaultValue: data?.no_same_card_used || '',
        required: true,
    },
    {
        type: "number",
        label: "Total Discount Amount Allowed",
        infoText: "Choose No Same Card Used/Cust Mobile No or Total Discount Amount Allowed. Both not work in same campaign",
        name: "allowed_dis_amt",
        placeholder: "Allowed discount amount",
        defaultValue: data?.allowed_dis_amt || '',
        required: true,
    },
    {
        type: "number",
        label: "Max Discount Amount",
        name: "max_discount_amt",
        placeholder: "Max discount amount",
        defaultValue: data?.max_discount_amt || 0,
        required: true,
    },
    {
        type: "number",
        label: "Discount Started Amount",
        name: "max_amt_to_display_offer",
        placeholder: "Discount start amount",
        defaultValue: data?.max_amt_to_display_offer || 0,
        required: true,
    },
    {
        type: "number",
        label: "Discount Customized based on Amt (JSON)",
        name: "cust_offer_amt",
        placeholder: "Discount start amount",
        defaultValue: data?.cust_offer_amt || 0,
        required: true,
    },
    {
        type: "text",
        label: "Card Type",
        name: "card_type",
        placeholder: "Card type",
        defaultValue: data?.card_type || '',
        required: true,
    },
    {
        type: "textarea",
        label: "BIN List",
        name: "bin_list",
        placeholder: "BIN list",
        defaultValue: data?.bin_list || '',
        required: true,
        height: 100,
    },
    {
        type: "textarea",
        label: "Campaign Code",
        infoText: "If merchant passes this value in parameter (campaign_code) then this campaign will display",
        name: "campaign_code",
        placeholder: "Campaign code",
        defaultValue: data?.campaign_code || '',
        required: true,
        height: 100,
    },
    {
        type: "checkbox-group",
        label: "Card Type",
        options: [
            {
                type: "checkbox",
                checkboxLabel: "VISA",
                id: "gw_visa",
                name: "gw_visa",
                placeholder: "Card type",
                defaultValue: data?.hasOwnProperty('gw_visa') ? data?.gw_visa : false,
                required: false,
                formGroupClass: "display-inline-table",
            },
            {
                type: "checkbox",
                checkboxLabel: "MASTER",
                id: "gw_master",
                name: "gw_master",
                placeholder: "Card type",
                defaultValue: data?.hasOwnProperty('gw_master') ? data?.gw_master : false,
                required: false,
                formGroupClass: "display-inline-table",
            },
            {
                type: "checkbox",
                checkboxLabel: "AMEX",
                id: "gw_amex",
                name: "gw_amex",
                placeholder: "Card type",
                defaultValue: data?.hasOwnProperty('gw_amex') ? data?.gw_amex : false,
                required: false,
                formGroupClass: "display-inline-table",
            },
            {
                type: "checkbox",
                checkboxLabel: "Other Card",
                id: "gw_other_card",
                name: "gw_other_card",
                placeholder: "Card type",
                defaultValue: data?.hasOwnProperty('gw_other_card') ? data?.gw_other_card : false,
                required: false,
                formGroupClass: "display-inline-table",
            },
            {
                type: "checkbox",
                checkboxLabel: "IB",
                id: "gw_ib",
                name: "gw_ib",
                placeholder: "Card type",
                defaultValue: data?.hasOwnProperty('gw_ib') ? data?.gw_ib : false,
                required: false,
                formGroupClass: "display-inline-table",
            },
            {
                type: "checkbox",
                checkboxLabel: "Mobile Banking",
                id: "gw_mb",
                name: "gw_mb",
                placeholder: "Card type",
                defaultValue: data?.hasOwnProperty('gw_mb') ? data?.gw_mb : false,
                required: false,
                formGroupClass: "display-inline-table",
            },
            {
                type: "checkbox",
                checkboxLabel: "Wallet",
                id: "gw_wallet",
                name: "gw_wallet",
                placeholder: "Card type",
                defaultValue: data?.hasOwnProperty('gw_wallet') ? data?.gw_wallet : false,
                required: false,
                formGroupClass: "display-inline-table",
            }
        ],
        required: false,
    },
    {
        type: "checkbox-group",
        label: "Discount Category",
        options: [
            {
                type: "checkbox",
                checkboxLabel: "Discount On Product Price",
                id: "disc_on_prod_price",
                name: "disc_on_prod_price",
                placeholder: "Card type",
                defaultValue: data?.hasOwnProperty('disc_on_prod_price') ? data?.disc_on_prod_price : false,
                required: false,
                formGroupClass: "display-inline-table",
            },
            {
                type: "checkbox",
                checkboxLabel: "Discount Price By Merchant",
                id: "disc_on_discount_field",
                name: "disc_on_discount_field",
                placeholder: "Card type",
                defaultValue: data?.hasOwnProperty('disc_on_discount_field') ? data?.disc_on_discount_field : false,
                required: false,
                formGroupClass: "display-inline-table",
            },
            {
                type: "checkbox",
                checkboxLabel: "Cashback Offer",
                id: "disc_on_cashback",
                name: "disc_on_cashback",
                placeholder: "Card type",
                defaultValue: data?.hasOwnProperty('disc_on_cashback') ? data?.disc_on_cashback : false,
                required: false,
                formGroupClass: "display-inline-table",
            }
        ],
        required: false,
        wrapperClass: "col-md-12 mt-2",
    },
    {
        type: "checkbox-group",
        options: [
            {
                type: "checkbox",
                checkboxLabel: "Allow EMI",
                id: "is_emi_allowed",
                name: "is_emi_allowed",
                placeholder: "Card type",
                defaultValue: data?.hasOwnProperty('is_emi_allowed') ? data?.is_emi_allowed : false,
                required: false,
                formGroupClass: "display-inline-table",
            },
            {
                type: "checkbox",
                checkboxLabel: "Saved Card",
                id: "is_save_card_disc",
                name: "is_save_card_disc",
                placeholder: "Card type",
                defaultValue: data?.hasOwnProperty('is_save_card_disc') ? data?.is_save_card_disc : false,
                required: false,
                formGroupClass: "display-inline-table",
            },
            {
                type: "checkbox",
                checkboxLabel: "Dynamic Discount Parameter",
                id: "is_dynamic_param",
                name: "is_dynamic_param",
                placeholder: "Card type",
                defaultValue: data?.hasOwnProperty('is_dynamic_param') ? data?.is_dynamic_param : false,
                required: false,
                formGroupClass: "display-inline-table",
            }
        ],
        required: false,
        wrapperClass: "col-md-12 mt-2",
        divider: true,
    },
    {
        type: "file",
        label: "Upload Offer Image",
        infoText: data?.offer_image_path
            ? <a href={"https://securepay.sslcommerz.com/stores/offers/" + data?.offer_image_path} target="_blank" rel="noreferrer">
                <span className="text-info"><u>View Offer Image</u></span>
            </a>
            : '',
        id: "offer_image_path",
        name: "offer_image_path",
        onChange: (e) => {fileChangeHandler(e, 'banner_rul')},
        required: false,
        wrapperClass: "col-md-12 mt-3",
    },
    {
        type: "select",
        label: "Status",
        name: "status",
        placeholder: "Select status",
        options: statusOptions || [],
        defaultValue: data?.hasOwnProperty('status')
            ? data?.status
            : '',
        required: true,
    }
];